<ion-content class="gradient-background ion-padding">
  <div class="register-container">
    <div class="logo-container">
      <img src="assets/logo.png" alt="App Logo" class="logo">
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
      <!-- Name Input -->
      <ion-item lines="none" class="ion-margin-bottom">
        <ion-icon name="person-outline" slot="start"></ion-icon>
        <ion-input 
          formControlName="name" 
          type="text" 
          placeholder="Nombre Completo" 
          class="input-with-icon"
          [class.invalid]="registerForm.get('name')?.invalid && registerForm.get('name')?.touched">
        </ion-input>
      </ion-item>

      <!-- Email Input -->
      <ion-item lines="none" class="ion-margin-bottom">
        <ion-icon name="mail-outline" slot="start"></ion-icon>
        <ion-input 
          formControlName="email" 
          type="email" 
          placeholder="Correo Electrónico" 
          class="input-with-icon"
          [class.invalid]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
        </ion-input>
      </ion-item>

      <!-- Password Input -->
      <ion-item lines="none" class="ion-margin-bottom">
        <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
        <ion-input 
          formControlName="password" 
          type="password" 
          placeholder="Contraseña" 
          class="input-with-icon"
          [class.invalid]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
        </ion-input>
      </ion-item>
      
      <!-- Password Strength Indicator -->
      <div class="password-strength-container" *ngIf="registerForm.get('password')?.value">
        <div class="password-strength-bar">
          <div 
            class="strength-indicator" 
            [ngClass]="{
              'weak': passwordStrength === 'weak',
              'medium': passwordStrength === 'medium',
              'strong': passwordStrength === 'strong'
            }">
          </div>
        </div>
        <p class="password-strength-text">
          Seguridad de contraseña: 
          <span [ngClass]="passwordStrength">
            {{ 
              passwordStrength === 'weak' ? 'Débil' : 
              passwordStrength === 'medium' ? 'Media' : 'Fuerte' 
            }}
          </span>
        </p>
      </div>

      <!-- Confirm Password Input -->
      <ion-item lines="none" class="ion-margin-bottom">
        <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
        <ion-input 
          formControlName="confirmPassword" 
          type="password" 
          placeholder="Confirmar Contraseña" 
          class="input-with-icon"
          [class.invalid]="registerForm.hasError('passwordMismatch') && registerForm.get('confirmPassword')?.touched">
        </ion-input>
      </ion-item>

      <!-- Register Button -->
      <ion-button 
        expand="block" 
        color="primary" 
        type="submit" 
        class="full-width-button"
        [disabled]="registerForm.invalid">
        Registrarse
      </ion-button>

      <!-- Login Link -->
      <div class="ion-text-center ion-margin-top">
        <p>
          ¿Ya tienes una cuenta? 
          <ion-button fill="clear" color="primary" (click)="onLogin()">
            Iniciar Sesión
          </ion-button>
        </p>
      </div>
    </form>
  </div>
</ion-content>
